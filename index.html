<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CD vs Treasury Bills Professional Comparator</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body data-color-scheme="light">
    <div class="container">
        <header class="app-header">
            <div class="header-top">
                <div class="header-content">
                    <h1>CD vs Treasury Bills Professional Comparator</h1>
                    <p class="subtitle">Advanced investment comparison with comprehensive 2025 tax optimization</p>
                </div>
                <div class="header-controls">
                    <button class="btn btn--outline theme-toggle" id="themeToggle" aria-label="Toggle theme">
                        <span class="theme-icon" id="themeIcon">🌙</span>
                        <span id="themeText">Dark</span>
                    </button>
                </div>
            </div>
        </header>

        <main class="app-main">
            <!-- 1. Tax Profile Setup - Fixed 2-Column Layout -->
            <section class="card tax-profile">
                <div class="card__header">
                    <h2>Tax Profile Setup</h2>
                    <span class="help-text">Calculate your taxable income and marginal tax rates using 2025 tax law</span>
                </div>
                <div class="card__body">
                    <div class="tax-profile-grid">
                        <div class="tax-profile-row">
                            <div class="form-group">
                                <label class="form-label" for="annualIncome">Annual Income ($)</label>
                                <input type="number" id="annualIncome" class="form-control" placeholder="105000" min="0" step="1000">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="preDeductions">Pre-tax Deductions ($)</label>
                                <input type="number" id="preDeductions" class="form-control" placeholder="24000" min="0" step="500">
                            </div>
                        </div>
                        <div class="tax-profile-row">
                            <div class="form-group">
                                <label class="form-label" for="filingStatus">Filing Status</label>
                                <select id="filingStatus" class="form-control">
                                    <option value="single">Single</option>
                                    <option value="marriedJoint">Married Filing Jointly</option>
                                    <option value="marriedSeparate">Married Filing Separately</option>
                                    <option value="headOfHousehold">Head of Household</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="state">State</label>
                                <select id="state" class="form-control">
                                    <option value="">Select State</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 2. Tax Calculation Summary -->
            <section class="card tax-summary hidden" id="taxSummary">
                <div class="card__header">
                    <h2>Tax Calculation Summary</h2>
                    <span class="help-text">Comprehensive 2025 tax calculation with accurate marginal rates</span>
                </div>
                <div class="card__body">
                    <div class="tax-flow">
                        <div class="tax-flow-step">
                            <div class="tax-flow-label">Annual Income</div>
                            <div class="tax-flow-value" id="incomeDisplay">$0</div>
                        </div>
                        <div class="tax-flow-arrow">−</div>
                        <div class="tax-flow-step">
                            <div class="tax-flow-label">Pre-tax Deductions</div>
                            <div class="tax-flow-value" id="deductionsDisplay">$0</div>
                        </div>
                        <div class="tax-flow-arrow">=</div>
                        <div class="tax-flow-step highlight">
                            <div class="tax-flow-label">Adjusted Gross Income</div>
                            <div class="tax-flow-value" id="agiDisplay">$0</div>
                        </div>
                        <div class="tax-flow-arrow">−</div>
                        <div class="tax-flow-step">
                            <div class="tax-flow-label">Standard Deduction (2025)</div>
                            <div class="tax-flow-value" id="standardDeductionDisplay">$0</div>
                        </div>
                        <div class="tax-flow-arrow">=</div>
                        <div class="tax-flow-step highlight primary">
                            <div class="tax-flow-label">Taxable Income</div>
                            <div class="tax-flow-value" id="taxableIncomeDisplay">$0</div>
                        </div>
                    </div>
                    
                    <div class="tax-rates-grid">
                        <div class="tax-rate-item">
                            <div class="tax-rate-label">Federal Marginal Rate</div>
                            <div class="tax-rate-value" id="federalMarginalRate">0%</div>
                            <div class="tax-rate-bracket" id="federalBracketInfo">-</div>
                        </div>
                        <div class="tax-rate-item">
                            <div class="tax-rate-label">State Marginal Rate</div>
                            <div class="tax-rate-value" id="stateMarginalRate">0%</div>
                            <div class="tax-rate-bracket" id="stateBracketInfo">-</div>
                        </div>
                        <div class="tax-rate-item highlight">
                            <div class="tax-rate-label">Combined Marginal Rate</div>
                            <div class="tax-rate-value" id="totalMarginalRate">0%</div>
                            <div class="tax-rate-bracket">Applied to investment income</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 3. Investment Configuration - Improved Spacing -->
            <section class="card investment-config">
                <div class="card__header">
                    <h2>Investment Configuration</h2>
                    <span class="help-text">Configure your investment amount and compare CD vs T-Bill options</span>
                </div>
                <div class="card__body investment-config-body">
                    <!-- Investment Amount -->
                    <div class="config-section amount-section">
                        <h3>Investment Amount</h3>
                        <div class="amount-options">
                            <button class="btn btn--outline amount-btn" data-amount="10000">$10,000</button>
                            <button class="btn btn--outline amount-btn" data-amount="25000">$25,000</button>
                            <button class="btn btn--outline amount-btn" data-amount="50000">$50,000</button>
                            <button class="btn btn--outline amount-btn" data-amount="100000">$100,000</button>
                            <button class="btn btn--outline amount-btn" data-amount="250000">$250,000</button>
                        </div>
                        <div class="form-group custom-amount">
                            <label class="form-label" for="customAmount">Custom Amount ($)</label>
                            <input type="number" id="customAmount" class="form-control" placeholder="Enter amount" min="1000" step="1000">
                        </div>
                    </div>

                    <!-- CD and T-Bill Configuration -->
                    <div class="config-grid">
                        <!-- CD Configuration -->
                        <div class="config-section cd-config">
                            <h3>💰 Certificate of Deposit</h3>
                            <span class="config-help">FDIC insured up to $250,000</span>
                            <div class="form-grid-compact">
                                <div class="form-group">
                                    <label class="form-label" for="cdBank">Bank</label>
                                    <select id="cdBank" class="form-control">
                                        <option value="">Select Bank</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="cdTerm">Term</label>
                                    <select id="cdTerm" class="form-control">
                                        <option value="">Select Term</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="compoundingFrequency">Compounding</label>
                                    <select id="compoundingFrequency" class="form-control">
                                        <option value="365">Daily</option>
                                        <option value="12" selected>Monthly</option>
                                        <option value="4">Quarterly</option>
                                        <option value="1">Annual</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Current Rate (APY)</label>
                                    <div class="rate-display" id="cdRateDisplay">Select options</div>
                                </div>
                            </div>
                        </div>

                        <!-- T-Bill Configuration -->
                        <div class="config-section tbill-config">
                            <h3>🏛️ Treasury Bills</h3>
                            <span class="config-help">Government backed, state tax exempt</span>
                            <div class="form-grid-compact">
                                <div class="form-group">
                                    <label class="form-label" for="tbillStrategy">Strategy</label>
                                    <select id="tbillStrategy" class="form-control">
                                        <option value="single">Single Purchase</option>
                                        <option value="ladder">Ladder Strategy</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="tbillTerm">T-Bill Term</label>
                                    <select id="tbillTerm" class="form-control">
                                        <option value="4week">4-Week (4.21%)</option>
                                        <option value="13week" selected>13-Week (4.14%)</option>
                                        <option value="26week">26-Week (4.07%)</option>
                                        <option value="52week">52-Week (3.88%)</option>
                                    </select>
                                </div>
                                <div class="form-group duration-match" id="durationMatchInfo">
                                    <label class="form-label">Duration Matching</label>
                                    <div class="duration-match-display" id="durationMatchDisplay">Select CD term first</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Action Card: Compare Button -->
            <section class="card action-card">
                <button class="btn btn--primary btn--lg btn--full-width" id="compareBtn">
                    📊 Compare Investments
                </button>
            </section>

            <!-- 4. Investment Comparison Results -->
            <section class="card results-section hidden" id="results">
                <div class="card__header">
                    <div class="results-header">
                        <h2>Investment Comparison Results</h2>
                        <button class="btn btn--primary" id="printAnalysisBtn">🖨️ Print Analysis Report</button>
                    </div>
                </div>
                <div class="card__body">
                    <div class="comparison-grid">
                        <div class="comparison-item cd-results">
                            <h3>💰 Certificate of Deposit</h3>
                            <div class="result-details">
                                <div class="result-row">
                                    <span>Bank:</span>
                                    <span id="result-cd-bank">-</span>
                                </div>
                                <div class="result-row">
                                    <span>Rate (APY):</span>
                                    <span id="result-cd-rate">-</span>
                                </div>
                                <div class="result-row">
                                    <span>Term:</span>
                                    <span id="result-cd-term">-</span>
                                </div>
                                <div class="result-row">
                                    <span>Compounding:</span>
                                    <span id="result-cd-compounding">-</span>
                                </div>
                                <div class="result-row">
                                    <span>Gross Return:</span>
                                    <span id="result-cd-gross">-</span>
                                </div>
                                <div class="result-row">
                                    <span>Federal Tax:</span>
                                    <span id="result-cd-fed-tax">-</span>
                                </div>
                                <div class="result-row">
                                    <span>State Tax:</span>
                                    <span id="result-cd-state-tax">-</span>
                                </div>
                                <div class="result-row highlight">
                                    <span>After-Tax Return:</span>
                                    <span id="result-cd-net">-</span>
                                </div>
                                <div class="result-row">
                                    <span>Effective Rate:</span>
                                    <span id="result-cd-effective">-</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="comparison-item tbill-results">
                            <h3>🏛️ Treasury Bills</h3>
                            <div class="result-details">
                                <div class="result-row">
                                    <span>Strategy:</span>
                                    <span id="result-tbill-strategy">-</span>
                                </div>
                                <div class="result-row">
                                    <span>Term:</span>
                                    <span id="result-tbill-term">-</span>
                                </div>
                                <div class="result-row">
                                    <span>Rate:</span>
                                    <span id="result-tbill-rate">-</span>
                                </div>
                                <div class="result-row">
                                    <span>Duration Match:</span>
                                    <span id="result-tbill-duration">-</span>
                                </div>
                                <div class="result-row">
                                    <span>Gross Return:</span>
                                    <span id="result-tbill-gross">-</span>
                                </div>
                                <div class="result-row">
                                    <span>Federal Tax:</span>
                                    <span id="result-tbill-fed-tax">-</span>
                                </div>
                                <div class="result-row">
                                    <span>State Tax:</span>
                                    <span class="tax-exempt">$0 (Exempt)</span>
                                </div>
                                <div class="result-row highlight">
                                    <span>After-Tax Return:</span>
                                    <span id="result-tbill-net">-</span>
                                </div>
                                <div class="result-row">
                                    <span>Effective Rate:</span>
                                    <span id="result-tbill-effective">-</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="recommendation" id="recommendation">
                        <h3>💡 Professional Investment Recommendation</h3>
                        <p id="recommendation-text">Enter your tax profile and investment details above to receive a personalized recommendation.</p>
                    </div>

                    <!-- Returns Comparison Analysis Chart -->
                    <div class="chart-section">
                        <h3>📊 Returns Comparison Analysis</h3>
                        <div class="chart-container">
                            <canvas id="comparisonChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 5. Enhanced Tax Analysis -->
            <section class="card enhanced-analysis hidden" id="enhancedAnalysis">
                <div class="card__header">
                    <div class="enhanced-analysis-header">
                        <h2>Enhanced Tax Analysis</h2>
                        <button class="btn btn--outline btn--sm" id="toggleEnhancedAnalysis">Show Details</button>
                    </div>
                </div>
                <div class="card__body enhanced-analysis-content hidden" id="enhancedAnalysisContent">
                    <div class="analysis-section compact">
                        <div class="compact-analysis-grid">
                            <div class="compact-item">
                                <h4>Tax Application</h4>
                                <div class="compact-detail" id="taxApplicationDetail">2025 tax brackets applied to taxable income</div>
                            </div>
                            <div class="compact-item">
                                <h4>Marginal Rates</h4>
                                <div class="compact-detail" id="marginalRatesDetail">Federal and state rates combined</div>
                            </div>
                            <div class="compact-item">
                                <h4>Tax Advantage</h4>
                                <div class="compact-detail" id="taxAdvantageDetail">T-Bills save on state taxes</div>
                            </div>
                        </div>
                    </div>

                    <div class="analysis-section">
                        <h3>Detailed Investment Tax Impact</h3>
                        <div class="calculation-tables">
                            <div class="calculation-table">
                                <h4>CD Tax Calculation</h4>
                                <table class="calculation-breakdown" id="cdCalculationTable">
                                    <thead>
                                        <tr>
                                            <th>Component</th>
                                            <th>Formula</th>
                                            <th>Value</th>
                                        </tr>
                                    </thead>
                                    <tbody id="cdCalculationTableBody">
                                        <tr><td>Interest Income</td><td>Amount × Rate × Term</td><td id="cd-calc-interest">-</td></tr>
                                        <tr><td>Federal Tax</td><td>Interest × Federal Rate</td><td id="cd-calc-fed">-</td></tr>
                                        <tr><td>State Tax</td><td>Interest × State Rate</td><td id="cd-calc-state">-</td></tr>
                                        <tr><td>Total Tax</td><td>Federal + State</td><td id="cd-calc-total-tax">-</td></tr>
                                        <tr><td>After-Tax Return</td><td>Interest - Total Tax</td><td id="cd-calc-net">-</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="calculation-table">
                                <h4>T-Bill Tax Calculation</h4>
                                <table class="calculation-breakdown" id="tbillCalculationTable">
                                    <thead>
                                        <tr>
                                            <th>Component</th>
                                            <th>Formula</th>
                                            <th>Value</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tbillCalculationTableBody">
                                        <tr><td>Interest Income</td><td>Amount × Rate × Strategy</td><td id="tbill-calc-interest">-</td></tr>
                                        <tr><td>Federal Tax</td><td>Interest × Federal Rate</td><td id="tbill-calc-fed">-</td></tr>
                                        <tr><td>State Tax</td><td>$0 (Exempt)</td><td id="tbill-calc-state">$0</td></tr>
                                        <tr><td>Total Tax</td><td>Federal Only</td><td id="tbill-calc-total-tax">-</td></tr>
                                        <tr><td>After-Tax Return</td><td>Interest - Federal Tax</td><td id="tbill-calc-net">-</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 6. Historical Rate Trends (T-Bills Only) -->
            <section class="card historical-trends" id="historicalTrends">
                <div class="card__header">
                    <h2>📈 Treasury Bills Historical Rate Trends</h2>
                    <span class="help-text">Last 6 months T-Bill rate trends across all major terms</span>
                </div>
                <div class="card__body">
                    <div class="chart-section">
                        <div class="chart-container">
                            <canvas id="historicalChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 7. Alternative Savings Options - 2 Column Layout -->
            <section class="card alternative-options" id="alternativeOptions">
                <div class="card__header">
                    <h2>🚀 Alternative Savings Options to Explore</h2>
                    <span class="help-text">Additional high-yield investment opportunities worth considering</span>
                </div>
                <div class="card__body">
                    <div class="alternatives-grid-two-column">
                        <div class="alternative-item">
                            <div class="alternative-header">
                                <h4>🏦 Brokered CDs</h4>
                                <div class="current-rate">4.5-5.2%</div>
                            </div>
                            <p class="alternative-description">CDs purchased through brokerage accounts from various banks</p>
                            <div class="pros-cons">
                                <div class="pros">
                                    <h5>✅ Pros:</h5>
                                    <ul>
                                        <li>Higher rates than direct bank CDs</li>
                                        <li>Secondary market liquidity</li>
                                        <li>FDIC insured</li>
                                        <li>No early withdrawal penalties if sold</li>
                                    </ul>
                                </div>
                                <div class="cons">
                                    <h5>❌ Cons:</h5>
                                    <ul>
                                        <li>May sell at loss if rates rise</li>
                                        <li>Brokerage account required</li>
                                        <li>Less predictable than bank CDs</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="alternative-item">
                            <div class="alternative-header">
                                <h4>🏛️ Municipal Bonds</h4>
                                <div class="current-rate">3.0-4.5%</div>
                            </div>
                            <p class="alternative-description">Bonds issued by state and local governments</p>
                            <div class="pros-cons">
                                <div class="pros">
                                    <h5>✅ Pros:</h5>
                                    <ul>
                                        <li>Federal tax-free income</li>
                                        <li>Often state tax-free in issuing state</li>
                                        <li>Good for high-bracket taxpayers</li>
                                        <li>Variety of maturities</li>
                                    </ul>
                                </div>
                                <div class="cons">
                                    <h5>❌ Cons:</h5>
                                    <ul>
                                        <li>Credit risk varies by issuer</li>
                                        <li>Interest rate risk</li>
                                        <li>May have call provisions</li>
                                        <li>Minimum investments often $5,000+</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="alternative-item">
                            <div class="alternative-header">
                                <h4>💰 High-Yield Savings</h4>
                                <div class="current-rate">4.0-4.5%</div>
                            </div>
                            <p class="alternative-description">Online savings accounts with competitive rates</p>
                            <div class="pros-cons">
                                <div class="pros">
                                    <h5>✅ Pros:</h5>
                                    <ul>
                                        <li>Full liquidity</li>
                                        <li>FDIC insured</li>
                                        <li>No minimum balance</li>
                                        <li>Easy online access</li>
                                    </ul>
                                </div>
                                <div class="cons">
                                    <h5>❌ Cons:</h5>
                                    <ul>
                                        <li>Variable rates can change</li>
                                        <li>Limited physical branches</li>
                                        <li>May have transfer limits</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="alternative-item">
                            <div class="alternative-header">
                                <h4>📈 Money Market Accounts</h4>
                                <div class="current-rate">3.8-4.3%</div>
                            </div>
                            <p class="alternative-description">Deposit accounts with check-writing and higher yields</p>
                            <div class="pros-cons">
                                <div class="pros">
                                    <h5>✅ Pros:</h5>
                                    <ul>
                                        <li>Higher rates than regular savings</li>
                                        <li>Check writing ability</li>
                                        <li>FDIC insured</li>
                                        <li>Some ATM access</li>
                                    </ul>
                                </div>
                                <div class="cons">
                                    <h5>❌ Cons:</h5>
                                    <ul>
                                        <li>Higher minimum balances</li>
                                        <li>Limited transactions</li>
                                        <li>Rates can be tiered</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Firebase SDKs (add these before your app.js script) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

    <script src="app.js"></script>
</body>
</html>